from flask import Blueprint, request
from api.core import create_response, serialize_list, logger
from sqlalchemy import inspect

main = Blueprint("main", __name__)  # initialize blueprint


lo World!")
    return "<h1>AVATAR BAZOOKA!</h1>"


@main.route('/user/login/', methods=['post'])
def login():
    message = ''
    if request.method == 'POST':
        username = request.form.get('login')
        password = request.form.get('password')

    if username == 'root' and password == 'pass':
        message = "Correct username and password"
        idt = 1
    else:
        message = "Wrong username or password"
        idt = -1
    return jsonify({'id': 1, 'message':message})

# function that is called when you visit /persons
@main.route("/api/v1/corchevatel/<int:user_id>", methods=["GET"])
def call_corchevatel(user_id):
    #user_id = filter(lambda t: t['user_id'] == user_id, corchevatel)
    return create_response(data={"result": "Шла Саша по шоссе и сосала сушку Оо"})

#@main.route("/api/v1/corchevatel_by_name/<str:user_fio>", methods=["GET"])
#def call_corchevatel_by_name(user_fio):
#    #user_id = filter(lambda t: t['user_id'] == user_id, corchevatel)
#    return create_response(data={"lastname":'Бубазека',"firstname":'Евген',"middlename":'Асекович',"result": "Шла Саша по шоссе и сосала сушку Оо"})
    

@main.route("/api/v1/interests/<int:user_id>", methods=["GET"])
def call_interests(user_id):
    res = {"transport modeling": 4, "artificial intelligence": 3, "ambulances": 3, "decision making": 3, "emergency services": 3, "commercial sex work": 2, "spatial analysis": 2, "computer vision": 2, "transport modelling": 2, "video data analysis": 2}
    return create_response(data=res)

@main.route("/api/v1/compatibility/<int:user_id>", methods=["GET"])
def call_compability(user_id):
    res = {"name":"Викеньтев Владимир Ильданович","score":0.5355445042}
    return create_response(data=res)

@main.route("/api/v1/events/<int:user_id>", methods=["GET"])
def call_events(user_id):
    res = {
            "events": [{
                "header": "Экономические процессы мирового сообщества",
                "view": "13",
                "date": "07.02.2020",
                "section": "Образование",
                "autor": "Грачева М.В.",
                "division": "Отдел международной аспирантуры и докторантуры",
                "tags": [{
                        "tag": "2 курс"
                    },
                    {
                        "tag": "Экономические процессы мирового сообщества"
                    }
                ],
                "text": "some text"
            },{
                "header": "Экономические процессы мирового сообщества",
                "view": "13",
                "date": "07.02.2020",
                "section": "Образование",
                "autor": "Грачева М.В.",
                "division": "Отдел международной аспирантуры и докторантуры",
                "tags": [{
                        "tag": "2 курс"
                    },
                    {
                        "tag": "Экономические процессы мирового сообщества"
                    }
                ],
                "text": "some text"
            }]}
    return create_response(data=res)



@main.route("/api/v1/supervisors/<int:user_id>", methods=["GET"])
def call_supervisors(user_id):

    res = {
        "supers": [{
            "name": "Иванов Иван",
            "info": "доцент кафедры...",
    'tags' :['complex networks',' complex networks', 'complex networks', 'complex networks'],
    'interests':'Social media group structure and its goals' }]
    }
    return create_response(data=res)


@main.route("/api/v1/digests/<int:user_id>", methods=["GET"])
def call_digests(user_id):
    res = {'digests':[
     {
       "headers": "Экономические процессы мирового сообщества (38.06.01)",
       "views": 13,
       "date": "07.02.2020",
       "section": "Образование",
       "autor": "Грачева М.В.",
       "division": "отдел международной аспирантуры и докторантуры",
       "tags": "2 курс38.06.01Экономические процессы мирового сообществааспирантураэкзамен",
       "text": "Уважаемые аспиранты 2 года обучения!  Экзамен по дисциплине Экономические процессы мирового сообщества (38.06.01) состоится 12 февраля в 15:00, ауд. 320а, Кронверкский проспект, 49"
     },
     {
       "headers": "Повторная промежуточная аттестация по математическим дисциплинам",
       "views": 66,
       "date": "06.02.2020",
       "section": "Образование",
       "autor": "Москаленко М.А.",
       "division": "факультет систем управления и робототехники",
       "tags": "высшая математикаликвидация задолженностейобразовательный центр математикиповышение успеваемости",
       "text": "Образовательный Центр Математики объявляет о работе комиссии по проведению повторной промежуточной аттестации (прием задолженностей).  Место проведения: ул. Ломоносова д.9 Расписание комиссий: Заседание 1 - 12.02.2020 в 17:00, ауд. 1508 Заседание 2 - 26.02.2020 в 17:00, ауд. 1508 Заседание 3 - 11.03.2020 в 17:00, ауд. 1508 Заседание 4 - 25.03.2020 в 17:00, ауд. 1508 Заседание 5 - 01.04.2020 в 17:00, ауд. 1508 Заседание 6 - 08.04.2020 в 17:00, ауд. 1508 Заседание 7 - 09.04.2020 в 17:00, ауд. 1508 Заседание 8 - 15.04.2020 в 17:00, ауд. 1508  Для записи следует заполнить форму на сайте ОЦМ."
     },
     {
       "headers": "Факультетская аттестация ИКТ",
       "views": 69,
       "date": "06.02.2020",
       "section": "Образование",
       "autor": "Грачева М.В.",
       "division": "отдел международной аспирантуры и докторантуры",
       "tags": "ИКТФакультетская аттестацияаспирантура",
       "text": "Уважаемые аспиранты ИКТ!   Напоминаем Вам, что факультетская аттестация ИКТ состоится 10 февраля в 10:00 ауд. 301/5, Биржевая линия д.14"
     },
     {
       "headers": "Состоялось публичное рассмотрение результатов второго этапа практико-ориентированных НИОКТР",
       "views": 228,
       "date": "06.02.2020",
       "section": "Наука и инновации",
       "autor": "Елисеев О.В.",
       "division": "департамент магистратуры",
       "tags": "",
       "text": "29 января 2020 года состоялась защита проектов второго этапа практико-ориентированных НИОКТР.  Заседание комиссии вел проректор по научной работе Университета ИТМО Владимир Олегович Никифоров.  На заседании было представлено семь проектов, которые прошли успешную защиту этапа: «Разработка лазерного источника 10 Вт/90 пс/1 МГц», руководитель – Коваль Владислав Вячеславович; «Разработка системы комплексной диагностики куриного яйца», руководитель – Кушкоева Анастасия Сергеевна; «Портативный волоконно-оптический анализатор распределенных поляризационных преобразований», руководитель – Мухтубаев Азамат; «Разработка пайка для функционального питания в условиях Крайнего Севера», руководитель – Лепешкин Артем Ильич; «Разработка оптического датчика тока с чувствительным тонкопленочным элементом на основе ферромагнитного материала», руководитель – Каминский Владимир Владимирович; «Разработка многофункциональной автономной посадочной станции для мультикоптеров с автопилотной системой», руководитель – Зенкин Артемий Михайлович; «Разработка системы автоматической очистки лидара беспилотного автомобиля», руководитель – Рочас Станислав Станиславович.  Публичное рассмотрение результатов по проектам практико-ориентированных НИОКТР  Представитель команды исполнителей каждой ПО НИОКТР презентовал результаты работы в виде научного доклада и ответил на вопросы комиссии (деканы и директора мегафакультетов). Вопросы членов комиссии были посвящены не только уточнению соответствия представленных изделий требованиям технических заданий, но и перспективам развития работы, а также возможностям и проблемам внедрения и коммерциализации разработки.  Комиссия отметила высокий уровень результатов работ, выполненных силами студентов и аспирантов в рамках ПО НИОКТР и вынесла решение о продолжении реализации в Университете ИТМО соответствующей программы поддержки молодых ученых, в целях обучения студентов и аспирантов на реальных научно-технических проектах. С протоколом можно ознакомиться (по ссылке) В настоящее время уже открыта подача заявок на конкурс ПО НИОКТР в котором могут принять участие все студенты и аспиранты университета.  С протоколом заседания комиссии можно ознакомиться по ссылке.   Поздравляем с успешной защитой второго этапа практико-ориентированных НИОКТР и благодарим за активную работу конкурсную комиссию! Прикрепленные файлы _mg 7648 1 136,07 КБ _mg 7657 1 163,99 КБ Протокол 219,70 КБ"
     }]}
    return create_response(data=res)
